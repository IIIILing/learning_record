# 错题

## 1．设整型变量m,n,a,b,c,d均为0，执行（m=a==b）||(n=c==d)后，m,n的值是（  ）

### A. 0，0    B. 0，1  C. 1，0    D. 1，1

*要解决这个问题，我们需要理解C语言中的比较操作和逻辑运算符的工作原理。*

*首先，a == b是一个比较表达式，它比较变量a和b的值是否相等。如果a和b的值相等，表达式的结果是1（真），否则结果是0（假）。*

*然后，c == d也是一个比较表达式，它的工作方式与a == b相同。*

*在C语言中，逻辑表达式x || y（其中||是逻辑或运算符）的工作原理如下：*

*如果x的值为非零（真），则x || y的结果为真（1），不会评估y的值。*
*如果x的值为零（假），则x || y的结果取决于y的值。*
*现在，让我们根据给定的条件来分析表达式(m=a==b) || (n=c==d)：*

*由于所有变量a、b、c、d的初始值都是0，所以a == b的结果是1（因为两者都等于0），m被赋值为1。*
*由于m的值是非零的，逻辑或表达式m || n的结果也将是非零的，因此n的值不会被赋新值，保持为0。*
*所以，最终m的值是1，n的值是0。正确答案是C. 1，0。*

**这个||在前面取到1的时候就会终止后面的计算，所以这里的n其实没有被判断到**。

## 2．设整型变量m,n,a,b,c,d均为1，执行“(m=a>b)&&(n=a>b)”后，m,n的值是（  ）

### A. ０，０  B. ０，１ C. １，０  D. １，１

- 和上一道题同理，&&，在上一个判定为0之后不会进行第二个的计算

## 3.设有语句int a=3；，则执行了语句a+=a-=a*a;后，变量a的值是（  ）### A. ３B. ０C. 9 D. －12

- 在C语言中，复合赋值运算符+=和-=的运算顺序是从右到左。这意味着在执行表达式a += a -= a * a;时，首先会计算a -= a * a，然后将结果加到a的当前值上。
- a*a：首先计算a的平方。由于a的值是3，所以a *a的结果是9。
- a -= a * a：接下来，从a的当前值中减去刚刚计算的结果。所以，a -= 9。初始时a是3，减去9后，a的值变为3 - 9，即-6。
- a += a -= a * a：最后，将a的当前值（现在为-6）加上它自身的值。所以，a += (-6)。这实际上是a = a + (-6)，但由于a已经是-6，所以-6-6=-12

*要注意的是在+=和-=计算中什么时候改变了a的值，如果改变了a的值，就要使用a的新值进行下一步的计算*。

## 运算符的优先级

在C语言中，运算符的优先级决定了表达式中运算的顺序。当表达式中存在多个运算符时，高优先级的运算符会先被计算。以下是C语言中运算符的优先级列表，从高到低排列：

1. 后缀运算符：`()` 括号、`[]` 下标、`.` 结构体成员访问、`->` 结构体指针成员访问、`++` 后缀递增、`--` 后缀递减
2. 一元运算符：`++` 前缀递增、`--` 前缀递减、`+` 正号、`-` 负号、`!` 逻辑非、`~` 按位取反、`(type)` 强制类型转换、`*` 指针解引用、`&` 地址运算符、`sizeof` 大小运算符、`_Alignof` 对齐运算符（C11）
3. 乘除运算符：`*` 乘法、`/` 除法、`%` 取模
4. 加减运算符：`+` 加法、`-` 减法
5. 移位运算符：`<<` 左移、`>>` 右移
6. 关系运算符：`<` 小于、`<=` 小于等于、`>` 大于、`>=` 大于等于
7. 相等运算符：`==` 等于、`!=` 不等于
8. 按位与运算符：`&`
9. 按位异或运算符：`^`
10. 按位或运算符：`|`
11. 逻辑与运算符：`&&`
12. 逻辑或运算符：`||`
13. 条件运算符：`?:`
14. 赋值运算符：`=`, `+=`, `-=`, `*=`, `/=`, `%=`, `<<=`, `>>=`, `&=`, `^=`, `|=`
15. 逗号运算符：`,`

请注意，除了优先级之外，运算符还有结合性的概念，即当表达式中存在多个相同优先级的运算符时，它们是从左到右还是从右到左进行计算的。大多数运算符在C语言中是从左到右结合的，但某些运算符（如赋值运算符）是从右到左结合的。

在实际编程中，为了提高代码的可读性，通常建议使用括号来明确指定运算的顺序，特别是当运算符优先级可能导致误解时。

## int a=0; if(a=1) a+=10; 结果的值是（  ）

### A. 0 B. 11 C. 10 D.  出错

#### 这个代码片段中有一个常见的编程错误，即在`if`语句的条件表达式中使用了赋值运算符`=`，而不是比较运算符`==`。因此，这个`if`语句实际上并不是在检查变量`a`的值是否为1，而是在将变量`a`的值赋为1，并且整个赋值表达式的结果是赋值后的值

所以，代码的执行流程如下：

1. `int a=0;` 初始化变量`a`，赋值为0。
2. `if(a=1)` 这实际上是`if((a=1))`，即将`a`赋值为1，并且条件表达式的结果为1（因为`a`现在是1）。
3. `a+=10;` 由于`if`条件为真，这条语句被执行，`a`的值增加10，变为11。

因此，最终`a`的值是11。正确答案是 B. 11

## 补充：逗号表达式

逗号表达式（Comma Expression）在C语言中是一种特殊的表达式，它由两个或多个用逗号`,`分隔的子表达式组成。逗号表达式的特点是，它会按照从左到右的顺序依次计算每个子表达式，但整个逗号表达式的最终结果是最右边子表达式的值。

逗号表达式通常用在以下场景：

1.**在`for`循环中**：逗号表达式可以用于更新多个变量，尤其是在循环中同时控制步长和计数器时。

```c

   for (int i = 0, j = 10; i < 10; ++i, --j) {
       // 循环体
   }
```

   在这个例子中，每次循环迭代，`i`会增加1，`j`会减少1。

2.**在条件表达式中**：逗号表达式可以用在条件语句中，用于执行多个语句，而不需要使用多个语句块。

```c
   if ((x = get_value()), x > 0) {
       // 执行语句，如果x的值大于0
   }
```

   这里，`x`被赋值为`get_value()`函数的返回值，然后检查`x`是否大于0。

3.**在函数调用中**：逗号表达式可以用于函数调用，尤其是在需要传递多个参数时。

```c
   printf("%d, %d\n", (a = 5), (b = 10));
```

   在这个例子中，`a`和`b`被分别赋值为5和10，然后这些值被传递给`printf`函数。

逗号表达式的一个重要特性是，所有子表达式都会被计算，即使后面的子表达式的结果不会被使用。这有时会导致性能上的浪费，因为一些子表达式可能具有副作用（比如赋值操作），即使它们的结果不会被存储或使用。

逗号表达式在某些情况下可以提高代码的简洁性，但如果过度使用或在复杂的上下文中使用，可能会降低代码的可读性。因此，建议谨慎使用逗号表达式，并在使用时确保代码的清晰和易于理解。

## 类型转换表达式

 y=int(x)：这个表达式试图将x强制转换为int类型，并将结果赋给变量y。然而，这不是一个有效的赋值表达式。在C语言中，类型转换通常使用括号来明确转换的类型，例如(y = int)(x)

 实际上**强制类型转换是（int）上的而不是（x）**

```c
 int i = 10;
float f = (float)i; // 显式类型转换：int 到 float
```

显式类型转换可以用在以下几种情况：

- 当你需要将一个较大的数据类型转换为一个较小的数据类型时（例如，从`double`到`int`），这可能会导致数据丢失或溢出。
- 当你需要将一个表达式的结果转换为特定的类型时，即使编译器不会自动进行这种转换。
- 当你需要在函数调用中匹配参数类型或返回类型时。

下面是一些显式类型转换的例子：

- 整数到浮点数转换：

```c
  int i = 5;
  double d = (double)i;
  ```

- 浮点数到整数转换（这会丢失小数部分）：

```c
  double d = 5.7;
  int i = (int)d; // 结果是5
  ```

- 将字符类型转换为整数类型：

```c
  char c = 'A';
  int i = (int)c;
  ```

- 指针到整数的转换（通常用于地址运算）：

```c
  int *p;
  int i = (int)p;
```

- 整数到指针的转换（需要小心使用，因为它可能导致未定义行为）：
  
```c
  int i = 10;
  int *p = (int *)i; // 通常是不安全的，除非i确实是一个有效的地址
```

在使用显式类型转换时，需要特别注意转换的安全性和合理性，以避免数据丢失、溢出或未定义行为。

## 链式赋值表达式

抱歉，之前的解释有误。让我们澄清一下链式赋值表达式的概念。

在C语言中，链式赋值表达式允许你使用单个赋值运算符将相同的值赋给多个变量。然而，链式赋值的语法和你描述的略有不同。

正确的链式赋值表达式是这样的：

```c
a = b = 5;
```

这个表达式的执行过程如下：

1. `b = 5` 首先被执行，将`b`的值设置为`5`。
2. 然后，`a`被赋值为`b`的值，也就是`5`。

因此，最终`a`和`b`的值都是`5`。这个表达式是合法的，并且是链式赋值的一个典型例子。它利用了赋值表达式返回赋值后变量的值的特性，从而允许多个变量被连续赋值相同的值。

虽然C语言中没有交换赋值表达式但是有链式赋值表达式

## 逻辑操作符

！a（逻辑非操作）：如果a！=0，则！a==0(非0的数表示真)